import{i as _,q as f,s as h,x as k,d as y,o as x,a as w,b as l,t as g,e as M,k as I,u as p,y as V}from"./vendor-BCqAv1Ex.js";import{r as $,c as b,F as R,_ as z}from"./common-DXkHsSyv.js";import{V as v,c as B}from"./video-CM5JDtN2.js";import{_ as C}from"./index-CWiJIzWu.js";function U(){const o=_([]),t=_([]);return{items:o,selected:t,onAddItem:async()=>{const a=await v.chooser(),n=async e=>{const r=URL.createObjectURL(e),u=await v.getVideoObject(r);return{id:v.getId(),url:r,name:e.name,size:R.formatSize(e.size),type:e.type.split("/")[1],dpi:{width:u.videoWidth,height:u.videoHeight},file:e,duration:parseInt(u.duration*10+"")/10,lastModified:k(e.lastModified).format("YYYY-MM-DD HH:mm:ss")}},c=a.map(e=>n(e)),s=await Promise.all(c);o.value.push(...s),f.success(`成功导入 ${s.length} 个视频`)},onRemoveItems:async a=>{const n=o.value.filter(({id:e})=>a.includes(e)).map(({name:e})=>e);if(!await $(n))return;const s=h.remove(o.value,({id:e})=>a.includes(e));h.remove(t.value,e=>a.includes(e)),f.success(`成功移除 ${s.length} 个视频`)},onConvertItems:async()=>{const a=o.value.filter(({id:n})=>t.value.includes(n));await b("video",a)}}}const P={class:"image-info"},Y=["src"],j={class:"info-base"},A={class:"info-name"},D={class:"info-size"},H=y({__name:"profile",props:{data:{}},setup(o){const t=o,d=()=>{B(t.data.url)};return(i,m)=>(x(),w("div",P,[l("video",{fit:"cover",src:i.data.url,width:50,height:34,onClick:d},null,8,Y),l("div",j,[l("div",A,g(i.data.name),1),l("div",D,g(i.data.size),1)])]))}}),L=C(H,[["__scopeId","data-v-cfc8e0ef"]]),S={class:"page"},E=y({__name:"index",setup(o){const{selected:t,items:d,onAddItem:i,onRemoveItems:m,onConvertItems:a}=U(),n=M(()=>[{text:"导入视频",type:"primary",onClick:()=>i()},{text:"批量删除",type:"primary",disabled:t.value.length<=0,onClick:()=>m(t.value)},{text:"转化选择项",type:"primary",disabled:t.value.length<=0,onClick:()=>a()}]),c=[{title:"基础信息",dataIndex:"name",width:400,render:({record:s})=>I(L,{data:s},null)},{title:"视频分辨率",dataIndex:"dpi",align:"center",render:({record:s})=>`${s.dpi.width} * ${s.dpi.height}`},{title:"视频时长(秒)",dataIndex:"duration",align:"center"},{title:"视频类型",dataIndex:"type",align:"center"},{title:"最后编辑时间",dataIndex:"lastModified",align:"center"}];return(s,e)=>(x(),w("div",S,[I(p(z),{selected:p(t),"onUpdate:selected":e[0]||(e[0]=r=>V(t)?t.value=r:null),options:{rowSelection:{type:"radio"}},data:p(d),operates:n.value,columns:c},null,8,["selected","data","operates"])]))}}),G=C(E,[["__scopeId","data-v-3862c879"]]);export{G as default};
